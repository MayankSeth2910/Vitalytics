<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Heart Disease Assessment - VITALYTICS</title>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--primary:hsl(187,72%,35%);--bg:hsl(200,20%,98%);--card:#fff;--text:hsl(210,20%,15%);--muted:hsl(210,10%,45%);--border:hsl(210,15%,90%);--danger:hsl(0,72%,51%);--success:hsl(142,60%,40%);--shadow:0 1px 3px rgba(0,0,0,.06),0 4px 12px rgba(0,0,0,.04);--radius:12px}
body{font-family:'Segoe UI',system-ui,sans-serif;background:var(--bg);color:var(--text)}
a{text-decoration:none;color:inherit}
.navbar{position:sticky;top:0;z-index:100;background:rgba(255,255,255,.9);backdrop-filter:blur(12px);border-bottom:1px solid var(--border)}
.nav-inner{max-width:1200px;margin:0 auto;padding:0 1.5rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.35rem;font-weight:800;color:var(--primary)}
.nav-links{display:flex;gap:2rem;list-style:none}
.nav-links a{font-size:.9rem;font-weight:500;color:var(--muted)}
.nav-links a.active{color:var(--primary)}
.nav-cta{padding:.5rem 1.25rem;border-radius:10px;background:var(--primary);color:#fff;font-size:.875rem;font-weight:600}
.hero{text-align:center;padding:3rem 1.5rem;background:linear-gradient(135deg,hsl(187,30%,96%),var(--bg));border-bottom:1px solid var(--border)}
.hero h1{font-size:2rem;font-weight:700;margin-bottom:.5rem}
.hero p{color:var(--muted);max-width:600px;margin:0 auto}
.form-section{max-width:900px;margin:2rem auto;padding:0 1.5rem}
.section-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:1.5rem 2rem;margin-bottom:1.5rem;box-shadow:var(--shadow)}
.card-header{display:flex;align-items:center;gap:.75rem;margin-bottom:1.5rem}
.card-icon{width:40px;height:40px;border-radius:10px;background:hsl(187,72%,92%);display:flex;align-items:center;justify-content:center;font-size:1.2rem}
.form-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:1.25rem}
.form-group{display:flex;flex-direction:column;gap:.35rem}
.form-group label{font-size:.85rem;font-weight:600}
.req{color:var(--danger)}
.desc{font-size:.75rem;color:var(--muted)}
.form-group input,.form-group select{padding:.6rem .75rem;border:1px solid var(--border);border-radius:8px;font-size:.9rem;outline:none}
.form-group input:focus,.form-group select:focus{border-color:var(--primary)}
.result-card{display:none;background:var(--card);border:2px solid var(--border);border-radius:var(--radius);padding:2rem;margin-bottom:1.5rem;text-align:center;box-shadow:var(--shadow)}
.result-card.positive{border-color:var(--danger)}
.result-card.negative{border-color:var(--success)}
.result-badge{display:inline-block;padding:.5rem 1.5rem;border-radius:999px;font-size:1.1rem;font-weight:700;margin-bottom:1rem}
.result-badge.positive{background:hsl(0,72%,95%);color:var(--danger)}
.result-badge.negative{background:hsl(142,60%,95%);color:var(--success)}
.conf-bar-wrap{margin:1rem auto;max-width:300px}
.conf-label{font-size:.85rem;color:var(--muted);margin-bottom:.4rem}
.conf-bar{height:10px;background:var(--border);border-radius:999px;overflow:hidden}
.conf-fill{height:100%;background:var(--primary);border-radius:999px;transition:width .8s ease}
.submit-wrap{text-align:center;margin-bottom:2rem}
.btn-primary{background:var(--primary);color:#fff;border:none;padding:.75rem 3rem;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:.5rem}
.btn-primary:disabled{opacity:.7;cursor:not-allowed}
.spinner{width:18px;height:18px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .7s linear infinite;display:none}
@keyframes spin{to{transform:rotate(360deg)}}
.disclaimer{display:flex;gap:.75rem;align-items:flex-start;background:hsl(210,15%,96%);border:1px solid var(--border);border-radius:var(--radius);padding:1rem 1.25rem;margin-bottom:1.5rem}
.disclaimer svg{flex-shrink:0;width:20px;height:20px;stroke:var(--muted);margin-top:2px}
.disclaimer p{font-size:.85rem;color:var(--muted)}
.overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:200;align-items:center;justify-content:center}
.overlay.open{display:flex}
.popup{background:var(--card);border-radius:var(--radius);padding:2rem;max-width:420px;width:90%;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,.15)}
.popup h3{font-size:1.25rem;font-weight:600;margin-bottom:.75rem}
.popup p{color:var(--muted);margin-bottom:1.5rem;font-size:.95rem}
.popup-btns{display:flex;gap:1rem;justify-content:center}
.btn-yes{padding:.6rem 2rem;background:var(--success);color:#fff;border:none;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer}
.btn-no{padding:.6rem 2rem;background:var(--danger);color:#fff;border:none;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer}
.btn-skip{margin-top:.75rem;background:none;border:none;color:var(--muted);font-size:.85rem;cursor:pointer;text-decoration:underline}
.footer{background:rgba(0,0,0,.85);color:#aaa;padding:2rem 1.5rem;text-align:center;font-size:.8rem}
</style>
</head>
<body>
<nav class="navbar"><div class="nav-inner">
  <a href="index.html" class="nav-logo">VITALYTICS</a>
  <ul class="nav-links"><li><a href="index.html">Home</a></li><li><a href="descript.html">How It Works</a></li><li><a href="assesment.html" class="active">Assessment</a></li></ul>
  <a href="assesment.html" class="nav-cta">All Assessments</a>
</div></nav>

<section class="hero">
  <h1>‚ù§Ô∏è Heart Disease Prediction</h1>
  <p>Enter cardiovascular indicators to assess heart disease risk using our ML model.</p>
</section>

<div class="form-section">
  <div class="result-card" id="resultCard">
    <div class="result-badge" id="resultBadge"></div>
    <p id="resultMsg" style="color:var(--muted);font-size:.95rem;margin-bottom:1rem"></p>
    <div class="conf-bar-wrap"><div class="conf-label" id="confLabel"></div><div class="conf-bar"><div class="conf-fill" id="confFill" style="width:0%"></div></div></div>
  </div>

  <form id="cvdForm" novalidate>
    <div class="section-card">
      <div class="card-header"><div class="card-icon">üë§</div><h2>Patient Demographics</h2></div>
      <div class="form-grid">
        <div class="form-group"><label>Age <span class="req">*</span></label><input type="number" id="age" placeholder="e.g. 52" min="1" max="120" required></div>
        <div class="form-group"><label>Sex <span class="req">*</span></label>
          <select id="sex" required><option value="">Select</option><option value="0">Female</option><option value="1">Male</option></select></div>
      </div>
    </div>
    <div class="section-card">
      <div class="card-header"><div class="card-icon">üíâ</div><h2>Vital Signs</h2></div>
      <div class="form-grid">
        <div class="form-group"><label>Resting Blood Pressure (mmHg) <span class="req">*</span></label><input type="number" id="trestbps" placeholder="e.g. 130" required></div>
        <div class="form-group"><label>Cholesterol (mg/dL) <span class="req">*</span></label><input type="number" id="chol" placeholder="e.g. 250" required></div>
        <div class="form-group"><label>Max Heart Rate Achieved <span class="req">*</span></label><input type="number" id="thalach" placeholder="e.g. 150" required></div>
        <div class="form-group"><label>ST Depression (Oldpeak) <span class="req">*</span></label><input type="number" id="oldpeak" step="0.1" placeholder="e.g. 1.5" required><span class="desc">Exercise-induced ST depression</span></div>
      </div>
    </div>
    <div class="section-card">
      <div class="card-header"><div class="card-icon">ü©∫</div><h2>Clinical Indicators</h2></div>
      <div class="form-grid">
        <div class="form-group"><label>Chest Pain Type <span class="req">*</span></label>
          <select id="cp" required><option value="">Select</option><option value="0">Typical Angina</option><option value="1">Atypical Angina</option><option value="2">Non-Anginal Pain</option><option value="3">Asymptomatic</option></select></div>
        <div class="form-group"><label>Fasting Blood Sugar &gt; 120 mg/dL <span class="req">*</span></label>
          <select id="fbs" required><option value="">Select</option><option value="0">No</option><option value="1">Yes</option></select></div>
        <div class="form-group"><label>Resting ECG Results <span class="req">*</span></label>
          <select id="restecg" required><option value="">Select</option><option value="0">Normal</option><option value="1">ST-T Wave Abnormality</option><option value="2">Left Ventricular Hypertrophy</option></select></div>
        <div class="form-group"><label>Exercise Induced Angina <span class="req">*</span></label>
          <select id="exang" required><option value="">Select</option><option value="0">No</option><option value="1">Yes</option></select></div>
        <div class="form-group"><label>Slope of Peak Exercise ST <span class="req">*</span></label>
          <select id="slope" required><option value="">Select</option><option value="0">Upsloping</option><option value="1">Flat</option><option value="2">Downsloping</option></select></div>
      </div>
    </div>
    <div class="submit-wrap">
      <button type="submit" class="btn-primary" id="submitBtn">
        Analyze Heart Health
        <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>
        <div class="spinner" id="btnSpinner"></div>
      </button>
    </div>
    <div class="disclaimer">
      <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M12 2a10 10 0 100 20 10 10 0 000-20z"/></svg>
      <p>Educational and screening purposes only. Not a substitute for professional medical advice.</p>
    </div>
  </form>
</div>

<div class="overlay" id="overlay"><div class="popup">
  <h3>Was this diagnosis accurate?</h3>
  <p>Your feedback helps improve our prediction models.</p>
  <div class="popup-btns"><button class="btn-yes" id="btnYes">‚úÖ Yes, Correct</button><button class="btn-no" id="btnNo">‚ùå No, Incorrect</button></div>
  <br><button class="btn-skip" id="btnSkip">Skip feedback</button>
</div></div>

<footer class="footer"><p>¬© 2026 VITALYTICS ‚Äî Educational purposes only.</p></footer>

<script>
const API='';let lastResult=null;
document.getElementById('cvdForm').addEventListener('submit',async(e)=>{
  e.preventDefault();const btn=document.getElementById('submitBtn');const spin=document.getElementById('btnSpinner');
  btn.disabled=true;spin.style.display='block';
  const payload={age:document.getElementById('age').value,sex:document.getElementById('sex').value,cp:document.getElementById('cp').value,trestbps:document.getElementById('trestbps').value,chol:document.getElementById('chol').value,fbs:document.getElementById('fbs').value,restecg:document.getElementById('restecg').value,thalach:document.getElementById('thalach').value,exang:document.getElementById('exang').value,oldpeak:document.getElementById('oldpeak').value,slope:document.getElementById('slope').value};
  try{const res=await fetch(`${API}/predict/heart`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const data=await res.json();if(data.error)throw new Error(data.error);lastResult=data;showResult(data);setTimeout(()=>document.getElementById('overlay').classList.add('open'),1500);}
  catch(err){alert('Prediction error: '+err.message);}
  finally{btn.disabled=false;spin.style.display='none';}
});
function showResult(data){
  const card=document.getElementById('resultCard'),badge=document.getElementById('resultBadge'),msg=document.getElementById('resultMsg'),fill=document.getElementById('confFill'),lbl=document.getElementById('confLabel');
  const isPos=data.prediction==='POSITIVE';
  card.style.display='block';card.className='result-card '+(isPos?'positive':'negative');
  badge.className='result-badge '+(isPos?'positive':'negative');
  badge.textContent=isPos?'‚ö†Ô∏è HEART DISEASE DETECTED':'‚úÖ NO HEART DISEASE DETECTED';
  msg.textContent=isPos?'Indicators suggest possible heart disease. Please consult a cardiologist promptly.':'No significant heart disease indicators detected. Maintain a healthy lifestyle.';
  if(data.confidence_pct!=null){lbl.textContent=`Model confidence: ${data.confidence_pct}%`;fill.style.width=data.confidence_pct+'%';}
  card.scrollIntoView({behavior:'smooth',block:'center'});
}
async function sendFeedback(val){if(!lastResult)return;document.getElementById('overlay').classList.remove('open');try{await fetch(`${API}/feedback`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:lastResult.id,tab:lastResult.tab,feedback:val})});}catch(e){console.warn(e);}}
document.getElementById('btnYes').onclick=()=>sendFeedback('yes');
document.getElementById('btnNo').onclick=()=>sendFeedback('no');
document.getElementById('btnSkip').onclick=()=>document.getElementById('overlay').classList.remove('open');
</script>
</body>
</html>
